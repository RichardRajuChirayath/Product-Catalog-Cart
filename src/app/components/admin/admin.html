<div class="container admin-wrapper">
    <!-- Login View -->
    <div *ngIf="!isLoggedIn()" class="login-container">
        <mat-card class="login-card glass-morphism">
            <mat-icon class="login-icon">admin_panel_settings</mat-icon>
            <mat-card-header>
                <mat-card-title>System Access</mat-card-title>
                <mat-card-subtitle>Enter credentials to access the console</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <mat-form-field appearance="outline" style="width: 100%; margin-top: 24px;">
                    <mat-label>Security Password</mat-label>
                    <input matInput type="password" [ngModel]="password()" (ngModelChange)="password.set($event)"
                        (keyup.enter)="onLogin()">
                    <mat-icon matSuffix>lock</mat-icon>
                </mat-form-field>
                <p class="error-text" *ngIf="loginError()" style="color: #f43f5e; font-weight: 600; margin-top: 8px;">
                    {{ loginError() }}
                </p>
            </mat-card-content>
            <mat-card-actions align="end">
                <button mat-raised-button color="primary" style="width: 100%; height: 48px;" (click)="onLogin()">
                    LOG IN
                </button>
            </mat-card-actions>
        </mat-card>
    </div>

    <!-- Dashboard View -->
    <div *ngIf="isLoggedIn()">
        <div class="stats-grid">
            <mat-card class="stat-card">
                <div class="stat-icon-box icon-blue">
                    <mat-icon>inventory</mat-icon>
                </div>
                <div class="stat-info">
                    <span class="stat-label">Stock Units</span>
                    <span class="stat-value">4,284</span>
                </div>
            </mat-card>
            <mat-card class="stat-card">
                <div class="stat-icon-box icon-purple">
                    <mat-icon>trending_up</mat-icon>
                </div>
                <div class="stat-info">
                    <span class="stat-label">Active Users</span>
                    <span class="stat-value">1.4k</span>
                </div>
            </mat-card>
            <mat-card class="stat-card">
                <div class="stat-icon-box icon-emerald">
                    <mat-icon>account_balance_wallet</mat-icon>
                </div>
                <div class="stat-info">
                    <span class="stat-label">Est. Revenue</span>
                    <span class="stat-value">₹12.4L</span>
                </div>
            </mat-card>
        </div>

        <mat-card class="provision-card">
            <mat-card-header style="margin-bottom: 32px;">
                <mat-card-title>Inventory Management</mat-card-title>
                <mat-card-subtitle>Global catalog provisioning system</mat-card-subtitle>
            </mat-card-header>

            <mat-card-content>
                <form #productForm="ngForm" (ngSubmit)="productForm.valid && onSubmit()" class="form-grid">
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Product Name</mat-label>
                        <input matInput name="title" [(ngModel)]="newProduct.title" required>
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                        <mat-label>Base Price (INR)</mat-label>
                        <input matInput type="number" name="price" [(ngModel)]="newProduct.price" required min="1">
                        <span matPrefix>₹&nbsp;</span>
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                        <mat-label>Category</mat-label>
                        <mat-select name="category" [(ngModel)]="newProduct.category" required>
                            <mat-option *ngFor="let cat of categories()" [value]="cat">{{ cat }}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Media Resource URL</mat-label>
                        <input matInput name="image" [(ngModel)]="newProduct.image" required pattern="https?://.+">
                        <mat-icon matSuffix>link</mat-icon>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Full Description</mat-label>
                        <textarea matInput name="description" [(ngModel)]="newProduct.description" required
                            rows="5"></textarea>
                    </mat-form-field>

                    <div class="full-width action-row">
                        <button mat-button type="reset" style="height: 50px; padding: 0 40px;">DISCARD</button>
                        <button mat-raised-button color="primary" class="btn-provision"
                            [disabled]="productForm.invalid">
                            PROVISION PRODUCT
                        </button>
                    </div>
                </form>
            </mat-card-content>
        </mat-card>
    </div>
</div>